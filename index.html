<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì—°ìŠµì¥</title>
  <style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    .body {
        border: 1px solid #ddd;
        margin: 5px;
        overflow: hidden;
        width: 90vw;
        height: 90vh;
        display: flex;
        justify-content: center;
        align-items: center;
    }

  </style>
</head>
<body>

    <div class="body">
    </div>

</body>
<script>
    const í­ì£½ = (elementQuery, message = "Confetti", option = {}) => {
        option = {
            ìƒ‰ì¢…ì´ìˆ˜ëŸ‰: 50,
            ìƒ‰ì¢…ì´ìµœëŒ€í¬ê¸°: 7,
            ìƒ‰ì¢…ì´ìµœì†Œí¬ê¸°: 1,
            ìµœëŒ€ê±°ë¦¬: 80,
            ìµœì†Œê±°ë¦¬: 30,
            ìµœëŒ€ê°ë„: 80,
            ìµœì†Œê°ë„: -10,
            xìœ„ì¹˜: 10,
            yìœ„ì¹˜: 70,
            ì§€ì†ì‹œê°„: 1.5,
            ...option
        }

        const ëœë¤ = (...ê°’) => Math.random() * (Math.max(...ê°’) - Math.min(...ê°’)) + Math.min(...ê°’)
        const parent = document.querySelector(elementQuery)
        parent.insertAdjacentHTML("beforeend", `
        <div class="wrap">
            <button><p>ğŸ‰</p><p>${message}</p></button>
            <svg viewBox="0 0 100 100"></svg>
        </div>
        <style>
        .wrap {
            position: relative;width: 100px;height: 40px;border: 1px solid #ddd;background: #fff;border-radius: 5px;cursor: pointer;
            button {
                width: 100%;height: 100%;border: none;background: none;display: flex;justify-content: center;align-items: center;padding: 0 10px;
                p {
                    transform-origin: 0 100%;width: 100%;
                    &:nth-child(1) {width: 20px;}
                }
            }
            svg {
                position: absolute;bottom: 0;left: 0;width: 100%;height: 200%;
            }
        }
        </style>
        `)

        const í‘ = (e) => {
            const íƒ€ê²Ÿ = e.currentTarget
            if(íƒ€ê²Ÿ.querySelector("svg").childElementCount) return

            íƒ€ê²Ÿ.querySelector("button p:nth-child(1)").style.transform = "skew(5deg, 5deg)"
            setTimeout(() => íƒ€ê²Ÿ.querySelector("button p:nth-child(1)").style.transform = "none", 100)

            for(let i = 0; i < option.ìƒ‰ì¢…ì´ìˆ˜ëŸ‰; i++) {
                const ìƒ‰ì¢…ì´í¬ê¸° = ëœë¤(option.ìƒ‰ì¢…ì´ìµœëŒ€í¬ê¸°, option.ìƒ‰ì¢…ì´ìµœì†Œí¬ê¸°)
                íƒ€ê²Ÿ.querySelector("svg").insertAdjacentHTML("beforeend", `<path 
                class="particle" 
                d="M ${option.xìœ„ì¹˜} ${option.yìœ„ì¹˜} v ${ìƒ‰ì¢…ì´í¬ê¸°} h ${ìƒ‰ì¢…ì´í¬ê¸°} v -${ìƒ‰ì¢…ì´í¬ê¸°} z" 
                style="
                fill: hsl(${Math.round(Math.random() * 360)} 98% 82% / 1);
                transform-origin: ${option.xìœ„ì¹˜}px ${option.yìœ„ì¹˜}px;
                transition: translate ${option.ì§€ì†ì‹œê°„}s cubic-bezier(0, 0.8, 0.5, 1), opacity ${ëœë¤(0.7, 0.1)}s cubic-bezier(0.8, 0, 1, 0.5) ${option.ì§€ì†ì‹œê°„ / 2}s, rotate ${option.ì§€ì†ì‹œê°„}s ease-out;
                ">`)
            }

            íƒ€ê²Ÿ.querySelectorAll(".particle").forEach(e => {
                const í˜„ì¬ê±°ë¦¬ = ëœë¤(option.ìµœëŒ€ê±°ë¦¬, option.ìµœì†Œê±°ë¦¬)
                const í˜„ì¬ê°ë„ = 360 - ëœë¤(option.ìµœëŒ€ê°ë„, option.ìµœì†Œê°ë„)
                setTimeout(() => {
                    e.style.opacity = 0
                    e.style.translate = `${
                        í˜„ì¬ê±°ë¦¬ * Math.cos(Math.PI / 180 * í˜„ì¬ê°ë„)
                    }px ${
                        í˜„ì¬ê±°ë¦¬ * Math.sin(Math.PI / 180 * í˜„ì¬ê°ë„)
                    }px`
                    e.style.rotate = "90deg"
                })
                e.addEventListener("transitionend", e.remove)
            })
        }

        const wrap = parent.querySelector(".wrap")
        wrap.addEventListener("click", í‘)
    }

    í­ì£½(".body")
</script>
</html>
